@()

@scripts = {
    <script src="@controllers.common.routes.Assets.at("angular/underscore-min.js")"></script>
    <script src="@controllers.common.routes.Assets.at("angular/restangular.min.js")"></script>
    <script src="@controllers.stock.routes.Assets.at("javascripts/stock-mgt.js")"></script>
}

@addStockModalHtml = {
    <div class="modal-header">
        <h3 class="title">Add Stock</h3>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <label>Code</label>
            <input type="text" class="form-control" ng-model="stock.code"/>
        </div>
        <div class="form-group">
            <label>Short Name</label>
            <input type="text" class="form-control" ng-model="stock.shortName"/>
        </div>
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" class="form-control" ng-model="stock.fullName"/>
        </div>
        <div class="form-group">
            <label>Industry</label>
            <input type="text" class="form-control" ng-model="stock.industry"/>
        </div>
        <div class="form-group">
            <label>Website</label>
            <input type="text" class="form-control" ng-model="stock.website"/>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="save()">Save</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
}

@editStockModalHtml = {
    <div class="modal-header">
        <h3 class="title">Edit Stock: {{stock.code}}</h3>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <label>Code</label>
            <input type="text" class="form-control" ng-model="stock.code" disabled/>
        </div>
        <div class="form-group">
            <label>Short Name</label>
            <input type="text" class="form-control" ng-model="stock.shortName"/>
        </div>
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" class="form-control" ng-model="stock.fullName"/>
        </div>
        <div class="form-group">
            <label>Industry</label>
            <input type="text" class="form-control" ng-model="stock.industry"/>
        </div>
        <div class="form-group">
            <label>Website</label>
            <input type="text" class="form-control" ng-model="stock.website"/>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-primary" ng-click="save()">Save</button>
        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
    </div>
}

@dashboard("Stock Management", scripts) {
    <div id="stock-mgt-app" ng-app="stockMgtApp" ng-controller="stockMgtCtrl">
        <div class="buttonbar row">
            <button type="button" class="btn btn-sm btn-success" ng-click="openAddStockModal()">
                <i class="glyphicon glyphicon-plus">
                </i> Add
            </button>
            <button type="button" class="btn btn-sm btn-success" ng-click="refresh()">
                <i class="glyphicon glyphicon-refresh"></i> Refresh
            </button>
        </div>

        <div class="row">
            <table class="table table-bordered">
                <thead>
                    <th>Code</th>
                    <th>Short Name</th>
                    <th>Full Name</th>
                    <th>Industry</th>
                    <th>Website</th>
                    <th>Action</th>
                </thead>
                <tbody>
                    <tr ng-repeat="stock in stocks">
                        <td>{{stock.code}}</td>
                        <td>{{stock.shortName}}</td>
                        <td>{{stock.fullName}}</td>
                        <td>{{stock.industry}}</td>
                        <td>{{stock.website}}</td>
                        <td>
                            <button class="btn btn-sm btn-danger" ng-click="deleteStock(stock)">
                                <i class="glyphicon glyphicon-remove-circle"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" ng-click="openEditStockModal(stock)">
                                <i class="glyphicon glyphicon-edit"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <script type="text/ng-template" id="addStockModal.html">
            @addStockModalHtml
        </script>

        <script type="text/ng-template" id="editStockModal.html">
            @editStockModalHtml
        </script>
    </div>

}