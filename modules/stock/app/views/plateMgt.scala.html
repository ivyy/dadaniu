@()

@scripts = {
  <script src="@controllers.common.routes.Assets.at("angular/underscore-min.js")"></script>
  <script src="@controllers.common.routes.Assets.at("angular/restangular.min.js")"></script>
  <script src="@controllers.stock.routes.Assets.at("javascripts/plate-mgt.js")"></script>
}

@addPlateModalHtml = {
  <div class="modal-header">
    <h3 class="title">Add Plate</h3>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label>Code</label>
      <input type="text" class="form-control" ng-model="plate.code"/>
    </div>
    <div class="form-group">
      <label>Short Name</label>
      <input type="text" class="form-control" ng-model="plate.shortName"/>
    </div>
    <div class="form-group">
      <label>Description</label>
      <input type="text" class="form-control" ng-model="plate.description"/>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="save()">Save</button>
    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
  </div>
}

@editPlateModalHtml = {
  <div class="modal-header">
    <h3 class="title">Edit Plate: {{plate.code}}</h3>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label>Code</label>
      <input type="text" class="form-control" ng-model="plate.code" />
    </div>
    <div class="form-group">
      <label>Short Name</label>
      <input type="text" class="form-control" ng-model="plate.shortName"/>
    </div>
    <div class="form-group">
      <label>Short Name</label>
      <input type="text" class="form-control" ng-model="plate.description"/>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" ng-click="save()">Save</button>
    <button class="btn btn-warning" ng-click="cancel()">Cancel</button>
  </div>
}

@dashboard("Plate Management", scripts) {
  <div id="plate-mgt-app" ng-app="plateMgtApp" ng-controller="plateMgtCtrl">
    <div class="buttonbar row">
      <button type="button" class="btn btn-sm btn-success" ng-click="openAddPlateModal()">
        <i class="glyphicon glyphicon-plus">
        </i> Add
      </button>
      <button type="button" class="btn btn-sm btn-success" ng-click="refresh()">
        <i class="glyphicon glyphicon-refresh"></i> Refresh
      </button>
    </div>

    <div class="row">
      <table class="table table-bordered">
        <thead>
          <th>Code</th>
          <th>Short Name</th>
          <th>Description</th>
          <th>Action</th>
        </thead>
        <tbody>
          <tr ng-repeat="plate in plates">
            <td>{{plate.code}}</td>
            <td>{{plate.shortName}}</td>
            <td>{{plate.description}}</td>
            <td>
              <button class="btn btn-sm btn-danger" ng-click="deletePlate(plate)">
                <i class="glyphicon glyphicon-remove-circle"></i>
              </button>
              <button class="btn btn-sm btn-danger" ng-click="openEditPlateModal(plate)">
                <i class="glyphicon glyphicon-edit"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <script type="text/ng-template" id="addPlateModal.html">
      @addPlateModalHtml
    </script>

    <script type="text/ng-template" id="editPlateModal.html">
      @editPlateModalHtml
    </script>
  </div>

}